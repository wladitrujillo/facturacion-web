<div class="main-content">
  <div class="container-fluid">
    <div class="card">
      <div class="card-body">
        <br>
        <div class="row">

          <div class="col-md-6">
            <legend>Cliente</legend>

            <div class="input-group no-border">
              <input [(ngModel)]="customer.taxId" (keydown.enter)="searchCustomer()" class="form-control"
                placeholder="Buscar..." type="search" value="">
              <button (click)="findCustomer()" mat-button matSuffix mat-stroked-button aria-label="search"
                matTooltip="Buscar cliente">
                <mat-icon>search</mat-icon>
              </button>
              <button (click)="addCustomer()" mat-button matSuffix mat-stroked-button aria-label="search"
                matTooltip="Agregar cliente" [matTooltipPosition]="'right'">
                <mat-icon>add</mat-icon>
              </button>
            </div>
            <div>{{customer.firstName}} {{customer.lastName}}</div>
            <div>
              <small>{{customer.email}}</small>
            </div>
          </div>
          <div class="col-md-6 mr-auto">
            <div class="card">
              <div class="card-body">


                <div>{{branch?.name}}</div>
                <small>{{branch?.code}}</small>


                {{invoice.createdAt}}

              </div>


            </div>

          </div>
        </div>

        <div class="row">

          <div class="col-sm-12 mr-auto">

            <button (click)="addProduct()" mat-icon-button matTooltip="Agregar item" [matTooltipPosition]="'right'"
              color="primary">
              <mat-icon aria-label="Example icon-button with a heart icon">add</mat-icon>
            </button>

            <div class="table-responsive">
              <table class="table table-shopping">
                <thead>
                  <tr>
                    <th class="text-left">{{ headerRow[0] }}</th>
                    <th>{{ headerRow[1] }}</th>
                    <th class="text-right">{{ headerRow[2] }}</th>
                    <th class="text-center">{{ headerRow[3] }}</th>
                    <th class="text-right">{{ headerRow[4] }}</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let detail of details">
                    <td>
                      <input [(ngModel)]="detail.product.code" matInput (keydown.enter)="searchProduct(detail)"
                        type="search">
                    </td>
                    <td class="td-name">
                      <a>{{detail.product.name}}</a>

                    </td>
                    <td class="td-number text-right"> {{detail.product.price | currency}}</td>
                    <td class="td-number">
                      {{detail.count}}
                      <div class="btn-group btn-group-sm">
                        <button mat-raised-button class="btn btn-round btn-info btn-xs" [disabled]="detail.count<=0"
                          (click)="decreaseCount(detail)">
                          <i class="material-icons">remove</i> </button>
                        <button mat-raised-button class="btn btn-round btn-info btn-xs" (click)="increaseCount(detail)">
                          <i class="material-icons">add</i> </button>
                      </div>
                    </td>
                    <td class="td-number">
                      {{detail.total | currency}}
                    </td>
                    <td class="td-actions">
                      <button mat-button type="button" matTooltip="Remove item" [matTooltipPosition]="'left'"
                        class="btn btn-link" (click)="removeItem(detail)">
                        <i class="material-icons">close</i>
                      </button>
                    </td>
                  </tr>

                </tbody>
              </table>
            </div>

          </div>


        </div>


        <div class="row">
          <div class="col-md-4 mr-auto">
            <legend>Forma De pago</legend>

            <button (click)="addProduct()" mat-icon-button matTooltip="Agregar item" [matTooltipPosition]="'right'"
              color="primary">
              <mat-icon aria-label="Example icon-button with a heart icon">add</mat-icon>
            </button>

            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th class="text-left">CÃ“DIGO</th>
                    <th class="text-right">VALOR</th>
                    <th class="text-right">PLAZO</th>
                    <th class="text-left">UNIDAD</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let wp of wayPayments">
                    <td class="text-left">
                      {{wp.code}}
                    </td>
                    <td class="text-right">
                      {{wp.value | currency}}
                    </td>
                    <td class="text-right">
                      {{wp.term}}
                    </td>
                    <td class="td-left">
                      {{wp.unit}}
                    </td>
                    <td class="td-actions">
                      <button mat-button type="button" matTooltip="Remove item" [matTooltipPosition]="'left'"
                        class="btn btn-link" (click)="removeWayPayment(wp)">
                        <i class="material-icons">close</i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="col-md-4"></div>
          <div class="col-md-4 mr-auto">
            <div class="card">
              <div class="card-body">

                <div class="table-responsive">
                  <table class="table">
                    <thead>
                      <tr>
                        <th class="text-left"></th>
                        <th class="text-right"></th>

                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="text-left">
                          SUBTOTAL
                        </td>
                        <td class="text-right">
                          {{invoice.totalWithoutTax | currency}}
                        </td>
                      </tr>
                      <tr>
                        <td class="text-left">
                          TOTAL
                        </td>
                        <td class="text-right">
                          {{invoice.total | currency}}
                        </td>
                      </tr>
                      <tr>
                        <td colspan="1"> </td>
                        <td class="text-right">
                          <button mat-raised-button type="button" class="btn btn-info btn-round"
                            (click)="createInvoice(branch,customer,invoice)">Completar compra <i
                              class="material-icons">keyboard_arrow_right</i></button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

              </div>
            </div>

          </div>
        </div>


      </div>
    </div>
  </div>
  <!-- end card -->
</div>